---
const { title } = Astro.props;
---

<header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
  <div class="container mx-auto px-4 py-3 flex items-center justify-between">
    <div class="flex items-center space-x-1 nav-content">
      <span class="text-primary font-bold text-xl">Love</span>
      <span class="text-accent font-bold text-xl">stu</span>
    </div>
    <div class="article-title text-lg font-medium overflow-hidden whitespace-nowrap text-ellipsis w-full md:w-auto text-center md:text-left">
      { title || 'Lovestu - 代码路上雾茫茫' }
    </div>

    <!-- 导航菜单 -->
    <nav class="hidden md:flex items-center space-x-6">
      <a href="/" class="text-gray-700 hover:text-primary transition-colors">主页</a>
      <a href="#" class="text-gray-700 hover:text-primary transition-colors">软件资源</a>
      <a href="#" class="text-gray-700 hover:text-primary transition-colors">软件使用</a>
      <a href="#" class="text-gray-700 hover:text-primary transition-colors">代码编程</a>
      <a href="#" class="text-gray-700 hover:text-primary transition-colors">汇编逆向</a>
      <a href="#" class="text-gray-700 hover:text-primary transition-colors">运维</a>
    </nav>

    <!-- 搜索和登录 -->
    <div class="flex items-center space-x-4">
      <button class="p-2 rounded-full hover:bg-gray-100 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </button>
      <button class="hidden md:block px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition-colors">登录</button>
      <button class="md:hidden p-2 rounded-full hover:bg-gray-100 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </div>
</header>

<style>
  /* 导航栏滚动效果样式 */
  .article-title {
    display: none;
  }

  /* 向下滚动时显示文章标题，隐藏导航 */
  header.show-title .nav-content, 
  header.show-title nav, 
  header.show-title .flex.items-center.space-x-4:not(.nav-content) {
    display: none;
  }

  header.show-title .article-title {
    display: block;
  }
</style>

<script>
  // 添加滚动监听事件，实现导航栏样式切换
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.querySelector('header');
    let lastScrollTop = 0;

    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      if (scrollTop > 100) {
        header.classList.add('show-title');
      } else {
        header.classList.remove('show-title');
      }

      lastScrollTop = scrollTop;
    });
  });
</script>